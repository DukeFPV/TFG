/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/create-chat/route";
exports.ids = ["app/api/create-chat/route"];
exports.modules = {

/***/ "@aws-sdk/client-s3":
/*!*************************************!*\
  !*** external "@aws-sdk/client-s3" ***!
  \*************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@aws-sdk/client-s3");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ "node:fs/promises":
/*!***********************************!*\
  !*** external "node:fs/promises" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs/promises");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@15.0.3_@opentelemetry+api@1.9.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fcreate-chat%2Froute&page=%2Fapi%2Fcreate-chat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcreate-chat%2Froute.ts&appDir=%2FUsers%2Fcarlos%2FDesktop%2FTFG%2FTFG%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fcarlos%2FDesktop%2FTFG%2FTFG&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.0.3_@opentelemetry+api@1.9.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fcreate-chat%2Froute&page=%2Fapi%2Fcreate-chat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcreate-chat%2Froute.ts&appDir=%2FUsers%2Fcarlos%2FDesktop%2FTFG%2FTFG%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fcarlos%2FDesktop%2FTFG%2FTFG&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/.pnpm/next@15.0.3_@opentelemetry+api@1.9.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/.pnpm/next@15.0.3_@opentelemetry+api@1.9.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/.pnpm/next@15.0.3_@opentelemetry+api@1.9.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_carlos_Desktop_TFG_TFG_src_app_api_create_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/create-chat/route.ts */ \"(rsc)/./src/app/api/create-chat/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/create-chat/route\",\n        pathname: \"/api/create-chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/create-chat/route\"\n    },\n    resolvedPagePath: \"/Users/carlos/Desktop/TFG/TFG/src/app/api/create-chat/route.ts\",\n    nextConfigOutput,\n    userland: _Users_carlos_Desktop_TFG_TFG_src_app_api_create_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNS4wLjNfQG9wZW50ZWxlbWV0cnkrYXBpQDEuOS4wX3JlYWN0LWRvbUAxOC4zLjFfcmVhY3RAMTguMy4xX19yZWFjdEAxOC4zLjEvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1hcHAtbG9hZGVyL2luZGV4LmpzP25hbWU9YXBwJTJGYXBpJTJGY3JlYXRlLWNoYXQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmNyZWF0ZS1jaGF0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY3JlYXRlLWNoYXQlMkZyb3V0ZS50cyZhcHBEaXI9JTJGVXNlcnMlMkZjYXJsb3MlMkZEZXNrdG9wJTJGVEZHJTJGVEZHJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmNhcmxvcyUyRkRlc2t0b3AlMkZURkclMkZURkcmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ2M7QUFDM0Y7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBc0Q7QUFDOUQ7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDMEY7O0FBRTFGIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9jYXJsb3MvRGVza3RvcC9URkcvVEZHL3NyYy9hcHAvYXBpL2NyZWF0ZS1jaGF0L3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jcmVhdGUtY2hhdC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NyZWF0ZS1jaGF0XCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jcmVhdGUtY2hhdC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9jYXJsb3MvRGVza3RvcC9URkcvVEZHL3NyYy9hcHAvYXBpL2NyZWF0ZS1jaGF0L3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.0.3_@opentelemetry+api@1.9.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fcreate-chat%2Froute&page=%2Fapi%2Fcreate-chat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcreate-chat%2Froute.ts&appDir=%2FUsers%2Fcarlos%2FDesktop%2FTFG%2FTFG%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fcarlos%2FDesktop%2FTFG%2FTFG&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@15.0.3_@opentelemetry+api@1.9.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!**********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.0.3_@opentelemetry+api@1.9.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \**********************************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/next@15.0.3_@opentelemetry+api@1.9.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!**********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.0.3_@opentelemetry+api@1.9.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \**********************************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/create-chat/route.ts":
/*!******************************************!*\
  !*** ./src/app/api/create-chat/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db/index.ts\");\n/* harmony import */ var _lib_db_schema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db/schema */ \"(rsc)/./src/lib/db/schema.ts\");\n/* harmony import */ var _lib_pinecone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/pinecone */ \"(rsc)/./src/lib/pinecone.ts\");\n/* harmony import */ var _lib_s3__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/s3 */ \"(rsc)/./src/lib/s3.ts\");\n/* harmony import */ var _clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @clerk/nextjs/server */ \"(rsc)/./node_modules/.pnpm/@clerk+nextjs@6.3.2_next@15.0.3_@opentelemetry+api@1.9.0_react-dom@18.3.1_react@18.3.1__react_erh4rexutio6xfxki4qahuk4f4/node_modules/@clerk/nextjs/dist/esm/app-router/server/auth.js\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/.pnpm/next@15.0.3_@opentelemetry+api@1.9.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/api/server.js\");\n\n\n\n\n\n\nasync function POST(req) {\n    const { userId } = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_5__.auth)();\n    if (!userId) {\n        return next_server__WEBPACK_IMPORTED_MODULE_4__.NextResponse.json({\n            error: \"No se ha autenticado el usuario\"\n        }, {\n            status: 401\n        });\n    }\n    try {\n        const body = await req.json();\n        const file_key = body?.file_key || '';\n        const file_name = body?.file_name || 'New Chat';\n        console.log('debug new-chat route api', file_key, file_name);\n        if (file_key) {\n            await (0,_lib_pinecone__WEBPACK_IMPORTED_MODULE_2__.loadS3IntoPinecone)(file_key);\n        }\n        const chat_id = await _lib_db__WEBPACK_IMPORTED_MODULE_0__.db.insert(_lib_db_schema__WEBPACK_IMPORTED_MODULE_1__.chats).values({\n            fileKey: file_key,\n            pdfName: file_name,\n            pdfUrl: (0,_lib_s3__WEBPACK_IMPORTED_MODULE_3__.getS3Url)(file_key),\n            userId: userId,\n            isPublic: false\n        }).returning({\n            insertedId: _lib_db_schema__WEBPACK_IMPORTED_MODULE_1__.chats.id\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_4__.NextResponse.json({\n            chat_id: chat_id[0].insertedId\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(error);\n        return next_server__WEBPACK_IMPORTED_MODULE_4__.NextResponse.json({\n            error: \"Error al crear el chat\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9jcmVhdGUtY2hhdC9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQzhCO0FBQ1U7QUFDVztBQUNmO0FBQ1E7QUFDRjtBQUVuQyxlQUFlTSxLQUFLQyxHQUFZO0lBRXJDLE1BQU0sRUFBQ0MsTUFBTSxFQUFDLEdBQUcsTUFBTUosMERBQUlBO0lBQzNCLElBQUksQ0FBQ0ksUUFBUTtRQUNYLE9BQU9ILHFEQUFZQSxDQUFDSSxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFrQyxHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUN2RjtJQUVBLElBQUk7UUFDRixNQUFNQyxPQUFPLE1BQU1MLElBQUlFLElBQUk7UUFDM0IsTUFBTUksV0FBV0QsTUFBTUMsWUFBWTtRQUNuQyxNQUFNQyxZQUFZRixNQUFNRSxhQUFhO1FBRXJDQyxRQUFRQyxHQUFHLENBQUMsNEJBQTRCSCxVQUFVQztRQUNsRCxJQUFJRCxVQUFVO1lBQ1osTUFBTVgsaUVBQWtCQSxDQUFDVztRQUMzQjtRQUVBLE1BQU1JLFVBQVUsTUFBTWpCLHVDQUFFQSxDQUN2QmtCLE1BQU0sQ0FBQ2pCLGlEQUFLQSxFQUNaa0IsTUFBTSxDQUFDO1lBQ05DLFNBQVNQO1lBQ1RRLFNBQVNQO1lBQ1RRLFFBQVFuQixpREFBUUEsQ0FBQ1U7WUFDakJMLFFBQVFBO1lBQ1JlLFVBQVU7UUFDWixHQUNDQyxTQUFTLENBQUM7WUFDVEMsWUFBWXhCLGlEQUFLQSxDQUFDeUIsRUFBRTtRQUN0QjtRQUVBLE9BQU9yQixxREFBWUEsQ0FBQ0ksSUFBSSxDQUFDO1lBQ3ZCUSxTQUFTQSxPQUFPLENBQUMsRUFBRSxDQUFDUSxVQUFVO1FBQ2hDLEdBQUU7WUFDQWQsUUFBUTtRQUNWO0lBRUYsRUFBRSxPQUFPRCxPQUFPO1FBRWRLLFFBQVFMLEtBQUssQ0FBQ0E7UUFDZCxPQUFPTCxxREFBWUEsQ0FBQ0ksSUFBSSxDQUN0QjtZQUFFQyxPQUFPO1FBQXlCLEdBQ2xDO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUVGIiwic291cmNlcyI6WyIvVXNlcnMvY2FybG9zL0Rlc2t0b3AvVEZHL1RGRy9zcmMvYXBwL2FwaS9jcmVhdGUtY2hhdC9yb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCB7IGRiIH0gZnJvbSBcIkAvbGliL2RiXCI7XG5pbXBvcnQgeyBjaGF0cyB9IGZyb20gXCJAL2xpYi9kYi9zY2hlbWFcIjtcbmltcG9ydCB7IGxvYWRTM0ludG9QaW5lY29uZSB9IGZyb20gXCJAL2xpYi9waW5lY29uZVwiXG5pbXBvcnQgeyBnZXRTM1VybCB9IGZyb20gXCJAL2xpYi9zM1wiO1xuaW1wb3J0IHsgYXV0aCB9IGZyb20gXCJAY2xlcmsvbmV4dGpzL3NlcnZlclwiO1xuaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCJcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBSZXF1ZXN0KSB7XG5cbiAgY29uc3Qge3VzZXJJZH0gPSBhd2FpdCBhdXRoKClcbiAgaWYgKCF1c2VySWQpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJObyBzZSBoYSBhdXRlbnRpY2FkbyBlbCB1c3VhcmlvXCIgfSwgeyBzdGF0dXM6IDQwMSB9KVxuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxLmpzb24oKVxuICAgIGNvbnN0IGZpbGVfa2V5ID0gYm9keT8uZmlsZV9rZXkgfHwgJydcbiAgICBjb25zdCBmaWxlX25hbWUgPSBib2R5Py5maWxlX25hbWUgfHwgJ05ldyBDaGF0J1xuXG4gICAgY29uc29sZS5sb2coJ2RlYnVnIG5ldy1jaGF0IHJvdXRlIGFwaScsIGZpbGVfa2V5LCBmaWxlX25hbWUpXG4gICAgaWYgKGZpbGVfa2V5KSB7XG4gICAgICBhd2FpdCBsb2FkUzNJbnRvUGluZWNvbmUoZmlsZV9rZXkpXG4gICAgfVxuXG4gICAgY29uc3QgY2hhdF9pZCA9IGF3YWl0IGRiXG4gICAgLmluc2VydChjaGF0cylcbiAgICAudmFsdWVzKHtcbiAgICAgIGZpbGVLZXk6IGZpbGVfa2V5LFxuICAgICAgcGRmTmFtZTogZmlsZV9uYW1lLFxuICAgICAgcGRmVXJsOiBnZXRTM1VybChmaWxlX2tleSksXG4gICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgIGlzUHVibGljOiBmYWxzZSwgLy8gU2V0IHRvIGZhbHNlIHRvIGluZGljYXRlIHRoYXQgdGhlIGNoYXQgaXMgbm90IHB1YmxpY1xuICAgIH0pXG4gICAgLnJldHVybmluZyh7XG4gICAgICBpbnNlcnRlZElkOiBjaGF0cy5pZFxuICAgIH0pXG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIGNoYXRfaWQ6IGNoYXRfaWRbMF0uaW5zZXJ0ZWRJZFxuICAgIH0se1xuICAgICAgc3RhdHVzOiAyMDBcbiAgICB9KVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG5cbiAgICBjb25zb2xlLmVycm9yKGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6IFwiRXJyb3IgYWwgY3JlYXIgZWwgY2hhdFwiIH0sIFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG4gIFxufVxuIl0sIm5hbWVzIjpbImRiIiwiY2hhdHMiLCJsb2FkUzNJbnRvUGluZWNvbmUiLCJnZXRTM1VybCIsImF1dGgiLCJOZXh0UmVzcG9uc2UiLCJQT1NUIiwicmVxIiwidXNlcklkIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwiYm9keSIsImZpbGVfa2V5IiwiZmlsZV9uYW1lIiwiY29uc29sZSIsImxvZyIsImNoYXRfaWQiLCJpbnNlcnQiLCJ2YWx1ZXMiLCJmaWxlS2V5IiwicGRmTmFtZSIsInBkZlVybCIsImlzUHVibGljIiwicmV0dXJuaW5nIiwiaW5zZXJ0ZWRJZCIsImlkIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/create-chat/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db/index.ts":
/*!*****************************!*\
  !*** ./src/lib/db/index.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   db: () => (/* binding */ db)\n/* harmony export */ });\n/* harmony import */ var _neondatabase_serverless__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @neondatabase/serverless */ \"(rsc)/./node_modules/.pnpm/@neondatabase+serverless@0.10.4/node_modules/@neondatabase/serverless/index.mjs\");\n/* harmony import */ var drizzle_orm_neon_http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! drizzle-orm/neon-http */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.36.1_@libsql+client@0.14.0_@neondatabase+serverless@0.10.4_@opentelemetry+api@1_jneduajdzsu5gejq55b43hmr3e/node_modules/drizzle-orm/neon-http/driver.js\");\n/* harmony import */ var _schema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./schema */ \"(rsc)/./src/lib/db/schema.ts\");\n\n\n\nif (!process.env.DATABASE_URL) {\n    throw new Error('DATABASE_URL no definido');\n}\nconst sql = (0,_neondatabase_serverless__WEBPACK_IMPORTED_MODULE_0__.neon)(process.env.DATABASE_URL);\nconst db = (0,drizzle_orm_neon_http__WEBPACK_IMPORTED_MODULE_2__.drizzle)(sql, {\n    schema: _schema__WEBPACK_IMPORTED_MODULE_1__\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBZ0Q7QUFDQTtBQUNiO0FBR25DLElBQUksQ0FBQ0csUUFBUUMsR0FBRyxDQUFDQyxZQUFZLEVBQUU7SUFDN0IsTUFBTSxJQUFJQyxNQUFNO0FBQ2xCO0FBRUEsTUFBTUMsTUFBTVAsOERBQUlBLENBQUNHLFFBQVFDLEdBQUcsQ0FBQ0MsWUFBWTtBQUVsQyxNQUFNRyxLQUFLUCw4REFBT0EsQ0FBQ00sS0FBSztJQUFFTCxNQUFNQSxzQ0FBQUE7QUFBQSxHQUFHIiwic291cmNlcyI6WyIvVXNlcnMvY2FybG9zL0Rlc2t0b3AvVEZHL1RGRy9zcmMvbGliL2RiL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG5lb24gfSBmcm9tICdAbmVvbmRhdGFiYXNlL3NlcnZlcmxlc3MnO1xuaW1wb3J0IHsgZHJpenpsZSB9IGZyb20gJ2RyaXp6bGUtb3JtL25lb24taHR0cCc7XG5pbXBvcnQgKiBhcyBzY2hlbWEgZnJvbSAnLi9zY2hlbWEnO1xuXG5cbmlmICghcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMKSB7XG4gIHRocm93IG5ldyBFcnJvcignREFUQUJBU0VfVVJMIG5vIGRlZmluaWRvJyk7XG59XG5cbmNvbnN0IHNxbCA9IG5lb24ocHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMKTtcblxuZXhwb3J0IGNvbnN0IGRiID0gZHJpenpsZShzcWwsIHsgc2NoZW1hfSk7XG4iXSwibmFtZXMiOlsibmVvbiIsImRyaXp6bGUiLCJzY2hlbWEiLCJwcm9jZXNzIiwiZW52IiwiREFUQUJBU0VfVVJMIiwiRXJyb3IiLCJzcWwiLCJkYiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db/index.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db/schema.ts":
/*!******************************!*\
  !*** ./src/lib/db/schema.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   chats: () => (/* binding */ chats),\n/* harmony export */   messages: () => (/* binding */ messages),\n/* harmony export */   userSystemEnum: () => (/* binding */ userSystemEnum),\n/* harmony export */   user_profiles: () => (/* binding */ user_profiles)\n/* harmony export */ });\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.36.1_@libsql+client@0.14.0_@neondatabase+serverless@0.10.4_@opentelemetry+api@1_jneduajdzsu5gejq55b43hmr3e/node_modules/drizzle-orm/pg-core/columns/enum.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.36.1_@libsql+client@0.14.0_@neondatabase+serverless@0.10.4_@opentelemetry+api@1_jneduajdzsu5gejq55b43hmr3e/node_modules/drizzle-orm/pg-core/table.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.36.1_@libsql+client@0.14.0_@neondatabase+serverless@0.10.4_@opentelemetry+api@1_jneduajdzsu5gejq55b43hmr3e/node_modules/drizzle-orm/pg-core/columns/serial.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.36.1_@libsql+client@0.14.0_@neondatabase+serverless@0.10.4_@opentelemetry+api@1_jneduajdzsu5gejq55b43hmr3e/node_modules/drizzle-orm/pg-core/columns/text.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.36.1_@libsql+client@0.14.0_@neondatabase+serverless@0.10.4_@opentelemetry+api@1_jneduajdzsu5gejq55b43hmr3e/node_modules/drizzle-orm/pg-core/columns/timestamp.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.36.1_@libsql+client@0.14.0_@neondatabase+serverless@0.10.4_@opentelemetry+api@1_jneduajdzsu5gejq55b43hmr3e/node_modules/drizzle-orm/pg-core/columns/varchar.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.36.1_@libsql+client@0.14.0_@neondatabase+serverless@0.10.4_@opentelemetry+api@1_jneduajdzsu5gejq55b43hmr3e/node_modules/drizzle-orm/pg-core/columns/boolean.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.36.1_@libsql+client@0.14.0_@neondatabase+serverless@0.10.4_@opentelemetry+api@1_jneduajdzsu5gejq55b43hmr3e/node_modules/drizzle-orm/pg-core/columns/integer.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.36.1_@libsql+client@0.14.0_@neondatabase+serverless@0.10.4_@opentelemetry+api@1_jneduajdzsu5gejq55b43hmr3e/node_modules/drizzle-orm/pg-core/columns/date.js\");\n\nconst userSystemEnum = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgEnum)('user_system_enum', [\n    'user',\n    'system',\n    'assistant'\n]);\nconst chats = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.pgTable)('chats', {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.serial)('id').primaryKey(),\n    pdfName: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)('pdf_name').notNull(),\n    pdfUrl: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)('pdf_url').notNull(),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)('created_at').notNull().defaultNow(),\n    userId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.varchar)('user_id', {\n        length: 256\n    }).notNull(),\n    fileKey: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)('file_key').notNull(),\n    isPublic: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.boolean)('is_public').notNull().default(false)\n});\nconst messages = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.pgTable)('messages', {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.serial)('id').primaryKey(),\n    chatId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)('chat_id').references(()=>chats.id).notNull(),\n    content: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)('content').notNull(),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)('created_at').notNull().defaultNow(),\n    role: userSystemEnum('role').notNull()\n});\nconst user_profiles = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.pgTable)('user_profiles', {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.serial)('id').primaryKey(),\n    name: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)('name').notNull(),\n    email: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)('email').notNull(),\n    birthday: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_8__.date)('birthday'),\n    age: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)('age').notNull(),\n    health: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)('health').notNull(),\n    bank: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)('bank').notNull(),\n    provincia: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)('provincia').notNull(),\n    genero: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)('genero').notNull(),\n    telefono: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)('telefono').notNull(),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)('created_at').notNull().defaultNow()\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiL3NjaGVtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQThHO0FBRXZHLE1BQU1TLGlCQUFpQkYsMkRBQU1BLENBQUMsb0JBQW9CO0lBQUM7SUFBUTtJQUFVO0NBQVksRUFBQztBQUVsRixNQUFNRyxRQUFRViw0REFBT0EsQ0FBQyxTQUFTO0lBQ3BDVyxJQUFJViwyREFBTUEsQ0FBQyxNQUFNVyxVQUFVO0lBQzNCQyxTQUFTWCx5REFBSUEsQ0FBQyxZQUFZWSxPQUFPO0lBQ2pDQyxRQUFRYix5REFBSUEsQ0FBQyxXQUFXWSxPQUFPO0lBQy9CRSxXQUFXWiw4REFBU0EsQ0FBQyxjQUFjVSxPQUFPLEdBQUdHLFVBQVU7SUFDdkRDLFFBQVFiLDREQUFPQSxDQUFDLFdBQVc7UUFBQ2MsUUFBTztJQUFHLEdBQUdMLE9BQU87SUFDaERNLFNBQVNsQix5REFBSUEsQ0FBQyxZQUFZWSxPQUFPO0lBQ2pDTyxVQUFVYiw0REFBT0EsQ0FBQyxhQUFhTSxPQUFPLEdBQUdRLE9BQU8sQ0FBQztBQUNuRCxHQUFFO0FBRUssTUFBTUMsV0FBV3ZCLDREQUFPQSxDQUFDLFlBQVk7SUFDMUNXLElBQUlWLDJEQUFNQSxDQUFDLE1BQU1XLFVBQVU7SUFDM0JZLFFBQVFsQiw0REFBT0EsQ0FBQyxXQUFXbUIsVUFBVSxDQUFDLElBQU1mLE1BQU1DLEVBQUUsRUFBRUcsT0FBTztJQUM3RFksU0FBU3hCLHlEQUFJQSxDQUFDLFdBQVdZLE9BQU87SUFDaENFLFdBQVdaLDhEQUFTQSxDQUFDLGNBQWNVLE9BQU8sR0FBR0csVUFBVTtJQUN2RFUsTUFBTWxCLGVBQWUsUUFBUUssT0FBTztBQUN0QyxHQUFFO0FBRUssTUFBTWMsZ0JBQWdCNUIsNERBQU9BLENBQUMsaUJBQWlCO0lBQ3BEVyxJQUFJViwyREFBTUEsQ0FBQyxNQUFNVyxVQUFVO0lBQzNCaUIsTUFBTTNCLHlEQUFJQSxDQUFDLFFBQVFZLE9BQU87SUFDMUJnQixPQUFPNUIseURBQUlBLENBQUMsU0FBU1ksT0FBTztJQUM1QmlCLFVBQVU1Qix5REFBSUEsQ0FBQztJQUNmNkIsS0FBSzFCLDREQUFPQSxDQUFDLE9BQU9RLE9BQU87SUFDM0JtQixRQUFRL0IseURBQUlBLENBQUMsVUFBVVksT0FBTztJQUM5Qm9CLE1BQU1oQyx5REFBSUEsQ0FBQyxRQUFRWSxPQUFPO0lBQzFCcUIsV0FBV2pDLHlEQUFJQSxDQUFDLGFBQWFZLE9BQU87SUFDckNzQixRQUFRbEMseURBQUlBLENBQUMsVUFBVVksT0FBTztJQUM5QnVCLFVBQVVuQyx5REFBSUEsQ0FBQyxZQUFZWSxPQUFPO0lBQ2pDRSxXQUFXWiw4REFBU0EsQ0FBQyxjQUFjVSxPQUFPLEdBQUdHLFVBQVU7QUFDekQsR0FBRSIsInNvdXJjZXMiOlsiL1VzZXJzL2Nhcmxvcy9EZXNrdG9wL1RGRy9URkcvc3JjL2xpYi9kYi9zY2hlbWEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICB7cGdUYWJsZSwgc2VyaWFsLCB0ZXh0LCBkYXRlLCB0aW1lc3RhbXAsIHZhcmNoYXIsIGludGVnZXIsIHBnRW51bSwgYm9vbGVhbn0gZnJvbSAnZHJpenpsZS1vcm0vcGctY29yZSdcblxuZXhwb3J0IGNvbnN0IHVzZXJTeXN0ZW1FbnVtID0gcGdFbnVtKCd1c2VyX3N5c3RlbV9lbnVtJywgWyd1c2VyJywgJ3N5c3RlbScsICdhc3Npc3RhbnQnXSlcblxuZXhwb3J0IGNvbnN0IGNoYXRzID0gcGdUYWJsZSgnY2hhdHMnLCB7XG4gIGlkOiBzZXJpYWwoJ2lkJykucHJpbWFyeUtleSgpLFxuICBwZGZOYW1lOiB0ZXh0KCdwZGZfbmFtZScpLm5vdE51bGwoKSxcbiAgcGRmVXJsOiB0ZXh0KCdwZGZfdXJsJykubm90TnVsbCgpLFxuICBjcmVhdGVkQXQ6IHRpbWVzdGFtcCgnY3JlYXRlZF9hdCcpLm5vdE51bGwoKS5kZWZhdWx0Tm93KCksXG4gIHVzZXJJZDogdmFyY2hhcigndXNlcl9pZCcsIHtsZW5ndGg6MjU2fSkubm90TnVsbCgpLFxuICBmaWxlS2V5OiB0ZXh0KCdmaWxlX2tleScpLm5vdE51bGwoKSxcbiAgaXNQdWJsaWM6IGJvb2xlYW4oJ2lzX3B1YmxpYycpLm5vdE51bGwoKS5kZWZhdWx0KGZhbHNlKSxcbn0pXG5cbmV4cG9ydCBjb25zdCBtZXNzYWdlcyA9IHBnVGFibGUoJ21lc3NhZ2VzJywge1xuICBpZDogc2VyaWFsKCdpZCcpLnByaW1hcnlLZXkoKSxcbiAgY2hhdElkOiBpbnRlZ2VyKCdjaGF0X2lkJykucmVmZXJlbmNlcygoKSA9PiBjaGF0cy5pZCkubm90TnVsbCgpLFxuICBjb250ZW50OiB0ZXh0KCdjb250ZW50Jykubm90TnVsbCgpLFxuICBjcmVhdGVkQXQ6IHRpbWVzdGFtcCgnY3JlYXRlZF9hdCcpLm5vdE51bGwoKS5kZWZhdWx0Tm93KCksXG4gIHJvbGU6IHVzZXJTeXN0ZW1FbnVtKCdyb2xlJykubm90TnVsbCgpLFxufSlcblxuZXhwb3J0IGNvbnN0IHVzZXJfcHJvZmlsZXMgPSBwZ1RhYmxlKCd1c2VyX3Byb2ZpbGVzJywge1xuICBpZDogc2VyaWFsKCdpZCcpLnByaW1hcnlLZXkoKSxcbiAgbmFtZTogdGV4dCgnbmFtZScpLm5vdE51bGwoKSxcbiAgZW1haWw6IHRleHQoJ2VtYWlsJykubm90TnVsbCgpLFxuICBiaXJ0aGRheTogZGF0ZSgnYmlydGhkYXknKSwgXG4gIGFnZTogaW50ZWdlcignYWdlJykubm90TnVsbCgpLFxuICBoZWFsdGg6IHRleHQoJ2hlYWx0aCcpLm5vdE51bGwoKSxcbiAgYmFuazogdGV4dCgnYmFuaycpLm5vdE51bGwoKSxcbiAgcHJvdmluY2lhOiB0ZXh0KCdwcm92aW5jaWEnKS5ub3ROdWxsKCksXG5cdGdlbmVybzogdGV4dCgnZ2VuZXJvJykubm90TnVsbCgpLFxuXHR0ZWxlZm9ubzogdGV4dCgndGVsZWZvbm8nKS5ub3ROdWxsKCksXG4gIGNyZWF0ZWRBdDogdGltZXN0YW1wKCdjcmVhdGVkX2F0Jykubm90TnVsbCgpLmRlZmF1bHROb3coKSxcbn0pXG5cbmV4cG9ydCB0eXBlIEluc2VydENoYXQgPSB0eXBlb2YgY2hhdHMuJGluZmVySW5zZXJ0O1xuZXhwb3J0IHR5cGUgU2VsZWN0Q2hhdCA9IHR5cGVvZiBjaGF0cy4kaW5mZXJTZWxlY3Q7XG5leHBvcnQgdHlwZSBJbnNlcnRNZXNzYWdlID0gdHlwZW9mIG1lc3NhZ2VzLiRpbmZlckluc2VydDtcbmV4cG9ydCB0eXBlIFNlbGVjdE1lc3NhZ2UgPSB0eXBlb2YgbWVzc2FnZXMuJGluZmVyU2VsZWN0O1xuZXhwb3J0IHR5cGUgSW5zZXJ0VXNlclByb2ZpbGUgPSB0eXBlb2YgdXNlcl9wcm9maWxlcy4kaW5mZXJJbnNlcnQ7XG5leHBvcnQgdHlwZSBTZWxlY3RVc2VyUHJvZmlsZSA9IHR5cGVvZiB1c2VyX3Byb2ZpbGVzLiRpbmZlclNlbGVjdDsiXSwibmFtZXMiOlsicGdUYWJsZSIsInNlcmlhbCIsInRleHQiLCJkYXRlIiwidGltZXN0YW1wIiwidmFyY2hhciIsImludGVnZXIiLCJwZ0VudW0iLCJib29sZWFuIiwidXNlclN5c3RlbUVudW0iLCJjaGF0cyIsImlkIiwicHJpbWFyeUtleSIsInBkZk5hbWUiLCJub3ROdWxsIiwicGRmVXJsIiwiY3JlYXRlZEF0IiwiZGVmYXVsdE5vdyIsInVzZXJJZCIsImxlbmd0aCIsImZpbGVLZXkiLCJpc1B1YmxpYyIsImRlZmF1bHQiLCJtZXNzYWdlcyIsImNoYXRJZCIsInJlZmVyZW5jZXMiLCJjb250ZW50Iiwicm9sZSIsInVzZXJfcHJvZmlsZXMiLCJuYW1lIiwiZW1haWwiLCJiaXJ0aGRheSIsImFnZSIsImhlYWx0aCIsImJhbmsiLCJwcm92aW5jaWEiLCJnZW5lcm8iLCJ0ZWxlZm9ubyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db/schema.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/embeddings.ts":
/*!*******************************!*\
  !*** ./src/lib/embeddings.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEmbeddings: () => (/* binding */ getEmbeddings)\n/* harmony export */ });\n/* harmony import */ var openai_edge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai-edge */ \"(rsc)/./node_modules/.pnpm/openai-edge@1.2.2/node_modules/openai-edge/dist/index.mjs\");\n\nconst config = new openai_edge__WEBPACK_IMPORTED_MODULE_0__.Configuration({\n    apiKey: process.env.OPENAI_API_KEY\n});\nconst openai = new openai_edge__WEBPACK_IMPORTED_MODULE_0__.OpenAIApi(config);\nasync function getEmbeddings(text) {\n    try {\n        const response = await openai.createEmbedding({\n            model: 'text-embedding-3-small',\n            input: text.replace(/\\n/g, ' ')\n        });\n        const result = await response.json();\n        return result.data[0].embedding;\n    } catch (error) {\n        console.log('Error en la llamada a OpenAI embeddings API', error);\n        throw error;\n    }\n} //*REVISADO*//\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2VtYmVkZGluZ3MudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBb0Q7QUFFcEQsTUFBTUUsU0FBUyxJQUFJRCxzREFBYUEsQ0FBQztJQUMvQkUsUUFBUUMsUUFBUUMsR0FBRyxDQUFDQyxjQUFjO0FBQ3BDO0FBRUEsTUFBTUMsU0FBUyxJQUFJUCxrREFBU0EsQ0FBQ0U7QUFFdEIsZUFBZU0sY0FBY0MsSUFBWTtJQUM5QyxJQUFJO1FBQ0YsTUFBTUMsV0FBVyxNQUFNSCxPQUFPSSxlQUFlLENBQUM7WUFDNUNDLE9BQU87WUFDUEMsT0FBT0osS0FBS0ssT0FBTyxDQUFDLE9BQU87UUFDN0I7UUFFQSxNQUFNQyxTQUFTLE1BQU1MLFNBQVNNLElBQUk7UUFDbEMsT0FBT0QsT0FBT0UsSUFBSSxDQUFDLEVBQUUsQ0FBQ0MsU0FBUztJQUVqQyxFQUFFLE9BQU9DLE9BQU87UUFDZEMsUUFBUUMsR0FBRyxDQUFDLCtDQUErQ0Y7UUFDM0QsTUFBTUE7SUFDUjtBQUNGLEVBRUEsY0FBYyIsInNvdXJjZXMiOlsiL1VzZXJzL2Nhcmxvcy9EZXNrdG9wL1RGRy9URkcvc3JjL2xpYi9lbWJlZGRpbmdzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7T3BlbkFJQXBpLCBDb25maWd1cmF0aW9ufSBmcm9tICdvcGVuYWktZWRnZSdcblxuY29uc3QgY29uZmlnID0gbmV3IENvbmZpZ3VyYXRpb24oe1xuICBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZXG59KVxuXG5jb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJQXBpKGNvbmZpZylcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEVtYmVkZGluZ3ModGV4dDogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBvcGVuYWkuY3JlYXRlRW1iZWRkaW5nKHtcbiAgICAgIG1vZGVsOiAndGV4dC1lbWJlZGRpbmctMy1zbWFsbCcsXG4gICAgICBpbnB1dDogdGV4dC5yZXBsYWNlKC9cXG4vZywgJyAnKVxuICAgIH0pXG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICByZXR1cm4gcmVzdWx0LmRhdGFbMF0uZW1iZWRkaW5nIGFzIG51bWJlcltdXG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZygnRXJyb3IgZW4gbGEgbGxhbWFkYSBhIE9wZW5BSSBlbWJlZGRpbmdzIEFQSScsIGVycm9yKVxuICAgIHRocm93IGVycm9yXG4gIH1cbn1cblxuLy8qUkVWSVNBRE8qLy8iXSwibmFtZXMiOlsiT3BlbkFJQXBpIiwiQ29uZmlndXJhdGlvbiIsImNvbmZpZyIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJPUEVOQUlfQVBJX0tFWSIsIm9wZW5haSIsImdldEVtYmVkZGluZ3MiLCJ0ZXh0IiwicmVzcG9uc2UiLCJjcmVhdGVFbWJlZGRpbmciLCJtb2RlbCIsImlucHV0IiwicmVwbGFjZSIsInJlc3VsdCIsImpzb24iLCJkYXRhIiwiZW1iZWRkaW5nIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/embeddings.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/pinecone.ts":
/*!*****************************!*\
  !*** ./src/lib/pinecone.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getPineconeClient: () => (/* binding */ getPineconeClient),\n/* harmony export */   loadS3IntoPinecone: () => (/* binding */ loadS3IntoPinecone),\n/* harmony export */   truncateStringByBytes: () => (/* binding */ truncateStringByBytes)\n/* harmony export */ });\n/* harmony import */ var _pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @pinecone-database/pinecone */ \"(rsc)/./node_modules/.pnpm/@pinecone-database+pinecone@4.0.0/node_modules/@pinecone-database/pinecone/dist/index.js\");\n/* harmony import */ var _pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _s3_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./s3-server */ \"(rsc)/./src/lib/s3-server.ts\");\n/* harmony import */ var _langchain_community_document_loaders_fs_pdf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/community/document_loaders/fs/pdf */ \"(rsc)/./node_modules/.pnpm/@langchain+community@0.3.14_@aws-crypto+sha256-js@5.2.0_@aws-sdk+client-s3@3.693.0_@aws-sdk+c_lyshjp7yilybtpziqse4baivla/node_modules/@langchain/community/document_loaders/fs/pdf.js\");\n/* harmony import */ var _pinecone_database_doc_splitter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @pinecone-database/doc-splitter */ \"(rsc)/./node_modules/.pnpm/@pinecone-database+doc-splitter@0.0.1/node_modules/@pinecone-database/doc-splitter/dist/index.js\");\n/* harmony import */ var _pinecone_database_doc_splitter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_pinecone_database_doc_splitter__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _embeddings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./embeddings */ \"(rsc)/./src/lib/embeddings.ts\");\n/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! md5 */ \"(rsc)/./node_modules/.pnpm/md5@2.3.0/node_modules/md5/md5.js\");\n/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(md5__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils */ \"(rsc)/./src/lib/utils.ts\");\n\n\n\n\n\n\n\n//*REVISADO*//\nconst getPineconeClient = ()=>{\n    return new _pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_0__.Pinecone({\n        apiKey: process.env.PINECONE_API_KEY\n    });\n};\n//! se elimina url: string, \nasync function loadS3IntoPinecone(fileKey) {\n    //* 1. Obtener el pdf -> descargar y leer el contenido\n    console.log('Descargando el archivo desde S3');\n    const file_name = await (0,_s3_server__WEBPACK_IMPORTED_MODULE_1__.downLoadFromS3)(fileKey);\n    if (!file_name) {\n        throw new Error('Error al descargar el archivo desde S3');\n    }\n    const loader = new _langchain_community_document_loaders_fs_pdf__WEBPACK_IMPORTED_MODULE_2__.PDFLoader(file_name);\n    const pages = await loader.load();\n    //* 2. Dividir el pdf en segmentos\n    const documents = await Promise.all(pages.map(prepareDocument));\n    //* 3. Vectorizar y subir los embeddings a Pinecone\n    const vectors = await Promise.all(documents.flat().map(embedDocument));\n    //* 4. Agregar los vectores a Pinecone\n    const client = await getPineconeClient();\n    const pineconeIndex = client.Index('sara-ia');\n    const namespace = pineconeIndex.namespace((0,_utils__WEBPACK_IMPORTED_MODULE_6__.convertToAscii)(fileKey));\n    console.log('Agregando los vectores a Pinecone');\n    await namespace.upsert(vectors);\n    return documents[0];\n}\nasync function embedDocument(doc) {\n    try {\n        const embeddings = await (0,_embeddings__WEBPACK_IMPORTED_MODULE_4__.getEmbeddings)(doc.pageContent);\n        const hash = md5__WEBPACK_IMPORTED_MODULE_5___default()(doc.pageContent);\n        return {\n            id: hash,\n            values: embeddings,\n            metadata: {\n                pageNumber: doc.metadata.pageNumber,\n                text: doc.metadata.text\n            }\n        };\n    } catch (error) {\n        console.log('Error en los embeddings Pinecone', error);\n        throw error;\n    }\n}\n// Preparar el documento para ser vectorizado\nasync function prepareDocument(page) {\n    // Se elimina la advertencia de eslint sobre el uso de const en lugar de let\n    // eslint-disable-next-line prefer-const\n    let { pageContent, metadata } = page;\n    pageContent = pageContent.replace(/\\n/g, ' ');\n    // Dividir el documento en segmentos\n    const splitter = new _pinecone_database_doc_splitter__WEBPACK_IMPORTED_MODULE_3__.RecursiveCharacterTextSplitter();\n    const docs = await splitter.splitDocuments([\n        new _pinecone_database_doc_splitter__WEBPACK_IMPORTED_MODULE_3__.Document({\n            pageContent,\n            metadata: {\n                pageNumber: metadata.loc.pageNumber,\n                text: truncateStringByBytes(pageContent, 36000)\n            }\n        })\n    ]);\n    return docs;\n}\n// Truncar el string a un nÃºmero de bytes\nconst truncateStringByBytes = (str, bytes)=>{\n    const enc = new TextEncoder();\n    return new TextDecoder('utf-8').decode(enc.encode(str).slice(0, bytes));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3BpbmVjb25lLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0U7QUFDMUI7QUFDNEI7QUFDZ0I7QUFDNUM7QUFDdkI7QUFDbUI7QUFFeEMsY0FBYztBQUVQLE1BQU1RLG9CQUFvQjtJQUU3QixPQUFPLElBQUlSLGlFQUFRQSxDQUFDO1FBQ2xCUyxRQUFRQyxRQUFRQyxHQUFHLENBQUNDLGdCQUFnQjtJQUN0QztBQUVKLEVBQUM7QUFRRCw0QkFBNEI7QUFDckIsZUFBZUMsbUJBQW1CQyxPQUFlO0lBQ3RELHNEQUFzRDtJQUN0REMsUUFBUUMsR0FBRyxDQUFDO0lBQ1osTUFBTUMsWUFBWSxNQUFNaEIsMERBQWNBLENBQUNhO0lBRXZDLElBQUksQ0FBQ0csV0FBVztRQUNkLE1BQU0sSUFBSUMsTUFBTTtJQUNsQjtJQUVBLE1BQU1DLFNBQVMsSUFBSWpCLG1GQUFTQSxDQUFDZTtJQUM3QixNQUFNRyxRQUFTLE1BQU1ELE9BQU9FLElBQUk7SUFFaEMsa0NBQWtDO0lBQ2xDLE1BQU1DLFlBQVksTUFBTUMsUUFBUUMsR0FBRyxDQUFDSixNQUFNSyxHQUFHLENBQUNDO0lBRTlDLG1EQUFtRDtJQUNuRCxNQUFNQyxVQUFVLE1BQU1KLFFBQVFDLEdBQUcsQ0FBQ0YsVUFBVU0sSUFBSSxHQUFHSCxHQUFHLENBQUNJO0lBRXZELHNDQUFzQztJQUN0QyxNQUFNQyxTQUFTLE1BQU10QjtJQUNyQixNQUFNdUIsZ0JBQWdCRCxPQUFPRSxLQUFLLENBQUM7SUFDbkMsTUFBTUMsWUFBWUYsY0FBY0UsU0FBUyxDQUFDMUIsc0RBQWNBLENBQUNPO0lBRXpEQyxRQUFRQyxHQUFHLENBQUM7SUFDWixNQUFNaUIsVUFBVUMsTUFBTSxDQUFDUDtJQUV2QixPQUFPTCxTQUFTLENBQUMsRUFBRTtBQUVyQjtBQUVBLGVBQWVPLGNBQWNNLEdBQWE7SUFDeEMsSUFBSTtRQUNGLE1BQU1DLGFBQWEsTUFBTS9CLDBEQUFhQSxDQUFDOEIsSUFBSUUsV0FBVztRQUN0RCxNQUFNQyxPQUFPaEMsMENBQUdBLENBQUM2QixJQUFJRSxXQUFXO1FBRWhDLE9BQU87WUFDTEUsSUFBSUQ7WUFDSkUsUUFBUUo7WUFDUkssVUFBVTtnQkFDUkMsWUFBWVAsSUFBSU0sUUFBUSxDQUFDQyxVQUFVO2dCQUNuQ0MsTUFBTVIsSUFBSU0sUUFBUSxDQUFDRSxJQUFJO1lBQ3pCO1FBQ0Y7SUFFRixFQUFFLE9BQU9DLE9BQU87UUFDZDdCLFFBQVFDLEdBQUcsQ0FBQyxvQ0FBb0M0QjtRQUNoRCxNQUFNQTtJQUNSO0FBQ0Y7QUFFQSw2Q0FBNkM7QUFDN0MsZUFBZWxCLGdCQUFnQm1CLElBQWE7SUFDMUMsNEVBQTRFO0lBQzVFLHdDQUF3QztJQUN4QyxJQUFJLEVBQUVSLFdBQVcsRUFBRUksUUFBUSxFQUFFLEdBQUdJO0lBQ2hDUixjQUFjQSxZQUFZUyxPQUFPLENBQUMsT0FBTztJQUV6QyxvQ0FBb0M7SUFDcEMsTUFBTUMsV0FBVyxJQUFJM0MsMkZBQThCQTtJQUNuRCxNQUFNNEMsT0FBTyxNQUFNRCxTQUFTRSxjQUFjLENBQUM7UUFDekMsSUFBSTlDLHFFQUFRQSxDQUFDO1lBQ1hrQztZQUNBSSxVQUFVO2dCQUNSQyxZQUFZRCxTQUFTUyxHQUFHLENBQUNSLFVBQVU7Z0JBQ25DQyxNQUFNUSxzQkFBc0JkLGFBQWE7WUFDM0M7UUFDRjtLQUNEO0lBQ0QsT0FBT1c7QUFDVDtBQUVBLHlDQUF5QztBQUNsQyxNQUFNRyx3QkFBd0IsQ0FBQ0MsS0FBYUM7SUFDakQsTUFBTUMsTUFBTSxJQUFJQztJQUNoQixPQUFPLElBQUlDLFlBQVksU0FBU0MsTUFBTSxDQUFDSCxJQUFJSSxNQUFNLENBQUNOLEtBQUtPLEtBQUssQ0FBQyxHQUFHTjtBQUNsRSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvY2FybG9zL0Rlc2t0b3AvVEZHL1RGRy9zcmMvbGliL3BpbmVjb25lLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBpbmVjb25lLCBQaW5lY29uZVJlY29yZCB9IGZyb20gJ0BwaW5lY29uZS1kYXRhYmFzZS9waW5lY29uZSdcbmltcG9ydCB7IGRvd25Mb2FkRnJvbVMzIH0gZnJvbSAnLi9zMy1zZXJ2ZXInXG5pbXBvcnQgeyBQREZMb2FkZXIgfSBmcm9tICdAbGFuZ2NoYWluL2NvbW11bml0eS9kb2N1bWVudF9sb2FkZXJzL2ZzL3BkZidcbmltcG9ydCB7RG9jdW1lbnQsIFJlY3Vyc2l2ZUNoYXJhY3RlclRleHRTcGxpdHRlcn0gZnJvbSAnQHBpbmVjb25lLWRhdGFiYXNlL2RvYy1zcGxpdHRlcidcbmltcG9ydCB7IGdldEVtYmVkZGluZ3MgfSBmcm9tICcuL2VtYmVkZGluZ3MnXG5pbXBvcnQgbWQ1IGZyb20gJ21kNSdcbmltcG9ydCB7IGNvbnZlcnRUb0FzY2lpIH0gZnJvbSAnLi91dGlscydcblxuLy8qUkVWSVNBRE8qLy9cblxuZXhwb3J0IGNvbnN0IGdldFBpbmVjb25lQ2xpZW50ID0gKCkgPT4ge1xuICBcbiAgICByZXR1cm4gbmV3IFBpbmVjb25lKHtcbiAgICAgIGFwaUtleTogcHJvY2Vzcy5lbnYuUElORUNPTkVfQVBJX0tFWSEsXG4gICAgfSlcbiAgXG59XG5cbnR5cGUgUERGUGFnZSA9IHtcbiAgcGFnZUNvbnRlbnQ6IHN0cmluZztcbiAgbWV0YWRhdGE6IHtcbiAgICBsb2M6IHsgcGFnZU51bWJlcjogbnVtYmVyIH07XG4gIH07XG59O1xuLy8hIHNlIGVsaW1pbmEgdXJsOiBzdHJpbmcsIFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRTM0ludG9QaW5lY29uZShmaWxlS2V5OiBzdHJpbmcpIHtcbiAgLy8qIDEuIE9idGVuZXIgZWwgcGRmIC0+IGRlc2NhcmdhciB5IGxlZXIgZWwgY29udGVuaWRvXG4gIGNvbnNvbGUubG9nKCdEZXNjYXJnYW5kbyBlbCBhcmNoaXZvIGRlc2RlIFMzJylcbiAgY29uc3QgZmlsZV9uYW1lID0gYXdhaXQgZG93bkxvYWRGcm9tUzMoZmlsZUtleSlcblxuICBpZiAoIWZpbGVfbmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgYWwgZGVzY2FyZ2FyIGVsIGFyY2hpdm8gZGVzZGUgUzMnKVxuICB9XG5cbiAgY29uc3QgbG9hZGVyID0gbmV3IFBERkxvYWRlcihmaWxlX25hbWUpXG4gIGNvbnN0IHBhZ2VzID0gKGF3YWl0IGxvYWRlci5sb2FkKCkpIGFzIFBERlBhZ2VbXVxuXG4gIC8vKiAyLiBEaXZpZGlyIGVsIHBkZiBlbiBzZWdtZW50b3NcbiAgY29uc3QgZG9jdW1lbnRzID0gYXdhaXQgUHJvbWlzZS5hbGwocGFnZXMubWFwKHByZXBhcmVEb2N1bWVudCkpXG5cbiAgLy8qIDMuIFZlY3Rvcml6YXIgeSBzdWJpciBsb3MgZW1iZWRkaW5ncyBhIFBpbmVjb25lXG4gIGNvbnN0IHZlY3RvcnMgPSBhd2FpdCBQcm9taXNlLmFsbChkb2N1bWVudHMuZmxhdCgpLm1hcChlbWJlZERvY3VtZW50KSlcblxuICAvLyogNC4gQWdyZWdhciBsb3MgdmVjdG9yZXMgYSBQaW5lY29uZVxuICBjb25zdCBjbGllbnQgPSBhd2FpdCBnZXRQaW5lY29uZUNsaWVudCgpXG4gIGNvbnN0IHBpbmVjb25lSW5kZXggPSBjbGllbnQuSW5kZXgoJ3NhcmEtaWEnKVxuICBjb25zdCBuYW1lc3BhY2UgPSBwaW5lY29uZUluZGV4Lm5hbWVzcGFjZShjb252ZXJ0VG9Bc2NpaShmaWxlS2V5KSlcblxuICBjb25zb2xlLmxvZygnQWdyZWdhbmRvIGxvcyB2ZWN0b3JlcyBhIFBpbmVjb25lJylcbiAgYXdhaXQgbmFtZXNwYWNlLnVwc2VydCh2ZWN0b3JzKVxuXG4gIHJldHVybiBkb2N1bWVudHNbMF1cbiAgXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGVtYmVkRG9jdW1lbnQoZG9jOiBEb2N1bWVudCl7XG4gIHRyeSB7XG4gICAgY29uc3QgZW1iZWRkaW5ncyA9IGF3YWl0IGdldEVtYmVkZGluZ3MoZG9jLnBhZ2VDb250ZW50KVxuICAgIGNvbnN0IGhhc2ggPSBtZDUoZG9jLnBhZ2VDb250ZW50KVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBoYXNoLFxuICAgICAgdmFsdWVzOiBlbWJlZGRpbmdzLFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgcGFnZU51bWJlcjogZG9jLm1ldGFkYXRhLnBhZ2VOdW1iZXIsXG4gICAgICAgIHRleHQ6IGRvYy5tZXRhZGF0YS50ZXh0LFxuICAgICAgfVxuICAgIH0gYXMgUGluZWNvbmVSZWNvcmRcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKCdFcnJvciBlbiBsb3MgZW1iZWRkaW5ncyBQaW5lY29uZScsIGVycm9yKVxuICAgIHRocm93IGVycm9yXG4gIH1cbn1cblxuLy8gUHJlcGFyYXIgZWwgZG9jdW1lbnRvIHBhcmEgc2VyIHZlY3Rvcml6YWRvXG5hc3luYyBmdW5jdGlvbiBwcmVwYXJlRG9jdW1lbnQocGFnZTogUERGUGFnZSl7XG4gIC8vIFNlIGVsaW1pbmEgbGEgYWR2ZXJ0ZW5jaWEgZGUgZXNsaW50IHNvYnJlIGVsIHVzbyBkZSBjb25zdCBlbiBsdWdhciBkZSBsZXRcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1jb25zdFxuICBsZXQgeyBwYWdlQ29udGVudCwgbWV0YWRhdGEgfSA9IHBhZ2VcbiAgcGFnZUNvbnRlbnQgPSBwYWdlQ29udGVudC5yZXBsYWNlKC9cXG4vZywgJyAnKVxuICBcbiAgLy8gRGl2aWRpciBlbCBkb2N1bWVudG8gZW4gc2VnbWVudG9zXG4gIGNvbnN0IHNwbGl0dGVyID0gbmV3IFJlY3Vyc2l2ZUNoYXJhY3RlclRleHRTcGxpdHRlcigpXG4gIGNvbnN0IGRvY3MgPSBhd2FpdCBzcGxpdHRlci5zcGxpdERvY3VtZW50cyhbXG4gICAgbmV3IERvY3VtZW50KHtcbiAgICAgIHBhZ2VDb250ZW50LFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgcGFnZU51bWJlcjogbWV0YWRhdGEubG9jLnBhZ2VOdW1iZXIsXG4gICAgICAgIHRleHQ6IHRydW5jYXRlU3RyaW5nQnlCeXRlcyhwYWdlQ29udGVudCwgMzYwMDApLFxuICAgICAgfVxuICAgIH0pXG4gIF0pXG4gIHJldHVybiBkb2NzXG59XG5cbi8vIFRydW5jYXIgZWwgc3RyaW5nIGEgdW4gbsO6bWVybyBkZSBieXRlc1xuZXhwb3J0IGNvbnN0IHRydW5jYXRlU3RyaW5nQnlCeXRlcyA9IChzdHI6IHN0cmluZywgYnl0ZXM6IG51bWJlcikgPT4ge1xuICBjb25zdCBlbmMgPSBuZXcgVGV4dEVuY29kZXIoKVxuICByZXR1cm4gbmV3IFRleHREZWNvZGVyKCd1dGYtOCcpLmRlY29kZShlbmMuZW5jb2RlKHN0cikuc2xpY2UoMCwgYnl0ZXMpKVxufSJdLCJuYW1lcyI6WyJQaW5lY29uZSIsImRvd25Mb2FkRnJvbVMzIiwiUERGTG9hZGVyIiwiRG9jdW1lbnQiLCJSZWN1cnNpdmVDaGFyYWN0ZXJUZXh0U3BsaXR0ZXIiLCJnZXRFbWJlZGRpbmdzIiwibWQ1IiwiY29udmVydFRvQXNjaWkiLCJnZXRQaW5lY29uZUNsaWVudCIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJQSU5FQ09ORV9BUElfS0VZIiwibG9hZFMzSW50b1BpbmVjb25lIiwiZmlsZUtleSIsImNvbnNvbGUiLCJsb2ciLCJmaWxlX25hbWUiLCJFcnJvciIsImxvYWRlciIsInBhZ2VzIiwibG9hZCIsImRvY3VtZW50cyIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJwcmVwYXJlRG9jdW1lbnQiLCJ2ZWN0b3JzIiwiZmxhdCIsImVtYmVkRG9jdW1lbnQiLCJjbGllbnQiLCJwaW5lY29uZUluZGV4IiwiSW5kZXgiLCJuYW1lc3BhY2UiLCJ1cHNlcnQiLCJkb2MiLCJlbWJlZGRpbmdzIiwicGFnZUNvbnRlbnQiLCJoYXNoIiwiaWQiLCJ2YWx1ZXMiLCJtZXRhZGF0YSIsInBhZ2VOdW1iZXIiLCJ0ZXh0IiwiZXJyb3IiLCJwYWdlIiwicmVwbGFjZSIsInNwbGl0dGVyIiwiZG9jcyIsInNwbGl0RG9jdW1lbnRzIiwibG9jIiwidHJ1bmNhdGVTdHJpbmdCeUJ5dGVzIiwic3RyIiwiYnl0ZXMiLCJlbmMiLCJUZXh0RW5jb2RlciIsIlRleHREZWNvZGVyIiwiZGVjb2RlIiwiZW5jb2RlIiwic2xpY2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/pinecone.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/s3-server.ts":
/*!******************************!*\
  !*** ./src/lib/s3-server.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   downLoadFromS3: () => (/* binding */ downLoadFromS3)\n/* harmony export */ });\n/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/client-s3 */ \"@aws-sdk/client-s3\");\n/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n\n\nasync function downLoadFromS3(file_key) {\n    return new Promise(async (resolve, reject)=>{\n        try {\n            const s3 = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.S3({\n                region: 'eu-west-3',\n                credentials: {\n                    accessKeyId: \"AKIA2S2Y4BAQNROXRB5X\",\n                    secretAccessKey: \"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\"\n                }\n            });\n            const params = {\n                Bucket: \"sara-ia\",\n                Key: file_key\n            };\n            const obj = await s3.getObject(params);\n            const file_name = `/tmp/sara-ia-${Date.now().toString()}.pdf`;\n            // eslint-disable-next-line @typescript-eslint/no-require-imports\n            if (obj.Body instanceof (__webpack_require__(/*! stream */ \"stream\").Readable)) {\n                // AWS-SDK v3 has some issues with their typescript definitions, but this works\n                // https://github.com/aws/aws-sdk-js-v3/issues/843\n                //open the writable stream and write the file\n                const file = fs__WEBPACK_IMPORTED_MODULE_1___default().createWriteStream(file_name);\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                file.on('open', function(fd) {\n                    // @ts-expect-error error reconocido\n                    obj.Body?.pipe(file).on(\"finish\", ()=>{\n                        return resolve(file_name);\n                    });\n                });\n            // obj.Body?.pipe(fs.createWriteStream(file_name));\n            }\n        } catch (error) {\n            console.error(error);\n            reject(error);\n            return null;\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3MzLXNlcnZlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF3QztBQUNwQjtBQUViLGVBQWVFLGVBQWVDLFFBQWdCO0lBQ25ELE9BQU8sSUFBSUMsUUFBUSxPQUFPQyxTQUFTQztRQUNqQyxJQUFJO1lBQ0YsTUFBTUMsS0FBSyxJQUFJUCxrREFBRUEsQ0FBQztnQkFDaEJRLFFBQVE7Z0JBQ1JDLGFBQWE7b0JBQ1hDLGFBQWFDLHNCQUF3QztvQkFDckRHLGlCQUFpQkgsMENBQTRDO2dCQUMvRDtZQUNGO1lBQ0EsTUFBTUssU0FBUztnQkFDYkMsUUFBUU4sU0FBc0M7Z0JBQzlDUSxLQUFLaEI7WUFDUDtZQUVBLE1BQU1pQixNQUFNLE1BQU1iLEdBQUdjLFNBQVMsQ0FBQ0w7WUFDL0IsTUFBTU0sWUFBWSxDQUFDLGFBQWEsRUFBRUMsS0FBS0MsR0FBRyxHQUFHQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1lBRTdELGlFQUFpRTtZQUNqRSxJQUFJTCxJQUFJTSxJQUFJLFlBQVlDLHNEQUEwQixFQUFFO2dCQUNsRCwrRUFBK0U7Z0JBQy9FLGtEQUFrRDtnQkFDbEQsNkNBQTZDO2dCQUM3QyxNQUFNRSxPQUFPNUIsMkRBQW9CLENBQUNxQjtnQkFDbEMsNkRBQTZEO2dCQUM3RE8sS0FBS0UsRUFBRSxDQUFDLFFBQVEsU0FBVUMsRUFBRTtvQkFDMUIsb0NBQW9DO29CQUNwQ1osSUFBSU0sSUFBSSxFQUFFTyxLQUFLSixNQUFNRSxHQUFHLFVBQVU7d0JBQ2hDLE9BQU8xQixRQUFRaUI7b0JBQ2pCO2dCQUNGO1lBQ0EsbURBQW1EO1lBQ3JEO1FBQ0YsRUFBRSxPQUFPWSxPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQ0E7WUFDZDVCLE9BQU80QjtZQUNQLE9BQU87UUFDVDtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9jYXJsb3MvRGVza3RvcC9URkcvVEZHL3NyYy9saWIvczMtc2VydmVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFMzIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1zM1wiO1xuaW1wb3J0IGZzIGZyb20gXCJmc1wiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZG93bkxvYWRGcm9tUzMoZmlsZV9rZXk6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHMzID0gbmV3IFMzKHtcbiAgICAgICAgcmVnaW9uOiAnZXUtd2VzdC0zJyxcbiAgICAgICAgY3JlZGVudGlhbHM6IHtcbiAgICAgICAgICBhY2Nlc3NLZXlJZDogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfUzNfQUNDRVNTX0tFWV9JRCEsXG4gICAgICAgICAgc2VjcmV0QWNjZXNzS2V5OiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TM19TRUNSRVRfQUNDRVNTX0tFWSEsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgQnVja2V0OiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TM19CVUNLRVRfTkFNRSEsXG4gICAgICAgIEtleTogZmlsZV9rZXksXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBvYmogPSBhd2FpdCBzMy5nZXRPYmplY3QocGFyYW1zKTtcbiAgICAgIGNvbnN0IGZpbGVfbmFtZSA9IGAvdG1wL3NhcmEtaWEtJHtEYXRlLm5vdygpLnRvU3RyaW5nKCl9LnBkZmA7XG5cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tcmVxdWlyZS1pbXBvcnRzXG4gICAgICBpZiAob2JqLkJvZHkgaW5zdGFuY2VvZiByZXF1aXJlKCdzdHJlYW0nKS5SZWFkYWJsZSkge1xuICAgICAgICAvLyBBV1MtU0RLIHYzIGhhcyBzb21lIGlzc3VlcyB3aXRoIHRoZWlyIHR5cGVzY3JpcHQgZGVmaW5pdGlvbnMsIGJ1dCB0aGlzIHdvcmtzXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hd3MvYXdzLXNkay1qcy12My9pc3N1ZXMvODQzXG4gICAgICAgIC8vb3BlbiB0aGUgd3JpdGFibGUgc3RyZWFtIGFuZCB3cml0ZSB0aGUgZmlsZVxuICAgICAgICBjb25zdCBmaWxlID0gZnMuY3JlYXRlV3JpdGVTdHJlYW0oZmlsZV9uYW1lKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICAgICAgICBmaWxlLm9uKCdvcGVuJywgZnVuY3Rpb24gKGZkKSB7XG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBlcnJvciByZWNvbm9jaWRvXG4gICAgICAgICAgb2JqLkJvZHk/LnBpcGUoZmlsZSkub24oXCJmaW5pc2hcIiwgKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZmlsZV9uYW1lKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIG9iai5Cb2R5Py5waXBlKGZzLmNyZWF0ZVdyaXRlU3RyZWFtKGZpbGVfbmFtZSkpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0pO1xufSJdLCJuYW1lcyI6WyJTMyIsImZzIiwiZG93bkxvYWRGcm9tUzMiLCJmaWxlX2tleSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiczMiLCJyZWdpb24iLCJjcmVkZW50aWFscyIsImFjY2Vzc0tleUlkIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1MzX0FDQ0VTU19LRVlfSUQiLCJzZWNyZXRBY2Nlc3NLZXkiLCJORVhUX1BVQkxJQ19TM19TRUNSRVRfQUNDRVNTX0tFWSIsInBhcmFtcyIsIkJ1Y2tldCIsIk5FWFRfUFVCTElDX1MzX0JVQ0tFVF9OQU1FIiwiS2V5Iiwib2JqIiwiZ2V0T2JqZWN0IiwiZmlsZV9uYW1lIiwiRGF0ZSIsIm5vdyIsInRvU3RyaW5nIiwiQm9keSIsInJlcXVpcmUiLCJSZWFkYWJsZSIsImZpbGUiLCJjcmVhdGVXcml0ZVN0cmVhbSIsIm9uIiwiZmQiLCJwaXBlIiwiZXJyb3IiLCJjb25zb2xlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/s3-server.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/s3.ts":
/*!***********************!*\
  !*** ./src/lib/s3.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getS3Url: () => (/* binding */ getS3Url),\n/* harmony export */   uploadToS3: () => (/* binding */ uploadToS3)\n/* harmony export */ });\n/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/client-s3 */ \"@aws-sdk/client-s3\");\n/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__);\n\nasync function uploadToS3(file) {\n    return new Promise((resolve, reject)=>{\n        try {\n            const s3 = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.S3({\n                region: \"eu-west-3\",\n                credentials: {\n                    accessKeyId: \"AKIA2S2Y4BAQNROXRB5X\",\n                    secretAccessKey: \"mwE9YFu7HnGdA2a6+IYqom3bjg4XqyyJuHvjixLo\"\n                }\n            });\n            const file_key = \"uploads/\" + Date.now().toString() + file.name.replace(\" \", \"-\");\n            const params = {\n                Bucket: \"sara-ia\",\n                Key: file_key,\n                Body: file\n            };\n            s3.putObject(params, (err, data)=>{\n                return resolve({\n                    file_key,\n                    file_name: file.name\n                });\n            });\n        } catch (error) {\n            reject(error);\n        }\n    });\n}\nfunction getS3Url(file_key) {\n    const url = `https://${\"sara-ia\"}.s3.eu-west-3.amazonaws.com/${file_key}`;\n    return url;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3MzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBZ0U7QUFFekQsZUFBZUMsV0FDcEJDLElBQVU7SUFFVixPQUFPLElBQUlDLFFBQVEsQ0FBQ0MsU0FBU0M7UUFDM0IsSUFBSTtZQUNGLE1BQU1DLEtBQUssSUFBSU4sa0RBQUVBLENBQUM7Z0JBQ2hCTyxRQUFRO2dCQUNSQyxhQUFhO29CQUNYQyxhQUFhQyxzQkFBd0M7b0JBQ3JERyxpQkFBaUJILDBDQUE0QztnQkFDL0Q7WUFDRjtZQUVBLE1BQU1LLFdBQ0osYUFBYUMsS0FBS0MsR0FBRyxHQUFHQyxRQUFRLEtBQUtoQixLQUFLaUIsSUFBSSxDQUFDQyxPQUFPLENBQUMsS0FBSztZQUU5RCxNQUFNQyxTQUFTO2dCQUNiQyxRQUFRWixTQUFzQztnQkFDOUNjLEtBQUtUO2dCQUNMVSxNQUFNdkI7WUFDUjtZQUNBSSxHQUFHb0IsU0FBUyxDQUNWTCxRQUNBLENBQUNNLEtBQVVDO2dCQUNULE9BQU94QixRQUFRO29CQUNiVztvQkFDQWMsV0FBVzNCLEtBQUtpQixJQUFJO2dCQUN0QjtZQUNGO1FBRUosRUFBRSxPQUFPVyxPQUFPO1lBQ2R6QixPQUFPeUI7UUFDVDtJQUNGO0FBQ0Y7QUFFTyxTQUFTQyxTQUFTaEIsUUFBZ0I7SUFDdkMsTUFBTWlCLE1BQU0sQ0FBQyxRQUFRLEVBQUV0QixTQUFzQyxDQUFDLDRCQUE0QixFQUFFSyxVQUFVO0lBQ3RHLE9BQU9pQjtBQUNUIiwic291cmNlcyI6WyIvVXNlcnMvY2FybG9zL0Rlc2t0b3AvVEZHL1RGRy9zcmMvbGliL3MzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFB1dE9iamVjdENvbW1hbmRPdXRwdXQsIFMzIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1zM1wiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBsb2FkVG9TMyhcbiAgZmlsZTogRmlsZVxuKTogUHJvbWlzZTx7IGZpbGVfa2V5OiBzdHJpbmc7IGZpbGVfbmFtZTogc3RyaW5nIH0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgczMgPSBuZXcgUzMoe1xuICAgICAgICByZWdpb246IFwiZXUtd2VzdC0zXCIsXG4gICAgICAgIGNyZWRlbnRpYWxzOiB7XG4gICAgICAgICAgYWNjZXNzS2V5SWQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1MzX0FDQ0VTU19LRVlfSUQhLFxuICAgICAgICAgIHNlY3JldEFjY2Vzc0tleTogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfUzNfU0VDUkVUX0FDQ0VTU19LRVkhLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGZpbGVfa2V5ID1cbiAgICAgICAgXCJ1cGxvYWRzL1wiICsgRGF0ZS5ub3coKS50b1N0cmluZygpICsgZmlsZS5uYW1lLnJlcGxhY2UoXCIgXCIsIFwiLVwiKTtcblxuICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICBCdWNrZXQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1MzX0JVQ0tFVF9OQU1FISxcbiAgICAgICAgS2V5OiBmaWxlX2tleSxcbiAgICAgICAgQm9keTogZmlsZSxcbiAgICAgIH07XG4gICAgICBzMy5wdXRPYmplY3QoXG4gICAgICAgIHBhcmFtcyxcbiAgICAgICAgKGVycjogYW55LCBkYXRhOiBQdXRPYmplY3RDb21tYW5kT3V0cHV0IHwgdW5kZWZpbmVkKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUoe1xuICAgICAgICAgICAgZmlsZV9rZXksXG4gICAgICAgICAgICBmaWxlX25hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UzNVcmwoZmlsZV9rZXk6IHN0cmluZykge1xuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly8ke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1MzX0JVQ0tFVF9OQU1FfS5zMy5ldS13ZXN0LTMuYW1hem9uYXdzLmNvbS8ke2ZpbGVfa2V5fWA7XG4gIHJldHVybiB1cmw7XG59Il0sIm5hbWVzIjpbIlMzIiwidXBsb2FkVG9TMyIsImZpbGUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInMzIiwicmVnaW9uIiwiY3JlZGVudGlhbHMiLCJhY2Nlc3NLZXlJZCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TM19BQ0NFU1NfS0VZX0lEIiwic2VjcmV0QWNjZXNzS2V5IiwiTkVYVF9QVUJMSUNfUzNfU0VDUkVUX0FDQ0VTU19LRVkiLCJmaWxlX2tleSIsIkRhdGUiLCJub3ciLCJ0b1N0cmluZyIsIm5hbWUiLCJyZXBsYWNlIiwicGFyYW1zIiwiQnVja2V0IiwiTkVYVF9QVUJMSUNfUzNfQlVDS0VUX05BTUUiLCJLZXkiLCJCb2R5IiwicHV0T2JqZWN0IiwiZXJyIiwiZGF0YSIsImZpbGVfbmFtZSIsImVycm9yIiwiZ2V0UzNVcmwiLCJ1cmwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/s3.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/utils.ts":
/*!**************************!*\
  !*** ./src/lib/utils.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cn: () => (/* binding */ cn),\n/* harmony export */   convertToAscii: () => (/* binding */ convertToAscii)\n/* harmony export */ });\n/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! clsx */ \"(rsc)/./node_modules/.pnpm/clsx@2.1.1/node_modules/clsx/dist/clsx.mjs\");\n/* harmony import */ var tailwind_merge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tailwind-merge */ \"(rsc)/./node_modules/.pnpm/tailwind-merge@2.5.4/node_modules/tailwind-merge/dist/bundle-mjs.mjs\");\n\n\nfunction cn(...inputs) {\n    return (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_1__.twMerge)((0,clsx__WEBPACK_IMPORTED_MODULE_0__.clsx)(inputs));\n}\nfunction convertToAscii(inputString) {\n    //Eliminar los caracteres especiales\n    const assciiString = inputString.replace(/[^\\x00- \\x7F]+/g, \"\");\n    return assciiString;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3V0aWxzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBNEM7QUFDSjtBQUVqQyxTQUFTRSxHQUFHLEdBQUdDLE1BQW9CO0lBQ3hDLE9BQU9GLHVEQUFPQSxDQUFDRCwwQ0FBSUEsQ0FBQ0c7QUFDdEI7QUFHTyxTQUFTQyxlQUFlQyxXQUFtQjtJQUNoRCxvQ0FBb0M7SUFDcEMsTUFBTUMsZUFBZUQsWUFBWUUsT0FBTyxDQUFDLG1CQUFtQjtJQUM1RCxPQUFPRDtBQUNUIiwic291cmNlcyI6WyIvVXNlcnMvY2FybG9zL0Rlc2t0b3AvVEZHL1RGRy9zcmMvbGliL3V0aWxzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNsc3gsIHR5cGUgQ2xhc3NWYWx1ZSB9IGZyb20gXCJjbHN4XCJcbmltcG9ydCB7IHR3TWVyZ2UgfSBmcm9tIFwidGFpbHdpbmQtbWVyZ2VcIlxuXG5leHBvcnQgZnVuY3Rpb24gY24oLi4uaW5wdXRzOiBDbGFzc1ZhbHVlW10pIHtcbiAgcmV0dXJuIHR3TWVyZ2UoY2xzeChpbnB1dHMpKVxufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0VG9Bc2NpaShpbnB1dFN0cmluZzogc3RyaW5nKSB7XG4gIC8vRWxpbWluYXIgbG9zIGNhcmFjdGVyZXMgZXNwZWNpYWxlc1xuICBjb25zdCBhc3NjaWlTdHJpbmcgPSBpbnB1dFN0cmluZy5yZXBsYWNlKC9bXlxceDAwLSBcXHg3Rl0rL2csIFwiXCIpXG4gIHJldHVybiBhc3NjaWlTdHJpbmdcbn1cblxuIl0sIm5hbWVzIjpbImNsc3giLCJ0d01lcmdlIiwiY24iLCJpbnB1dHMiLCJjb252ZXJ0VG9Bc2NpaSIsImlucHV0U3RyaW5nIiwiYXNzY2lpU3RyaW5nIiwicmVwbGFjZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/utils.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@15.0.3_@opentelemetry+api@1.9.0_react-dom@18.3.1_react@18.3.1__react@18.3.1","vendor-chunks/@opentelemetry+api@1.9.0","vendor-chunks/@clerk+shared@2.12.1_react-dom@18.3.1_react@18.3.1__react@18.3.1","vendor-chunks/@clerk+backend@1.16.2_react-dom@18.3.1_react@18.3.1__react@18.3.1","vendor-chunks/crypto-js@4.2.0","vendor-chunks/@clerk+nextjs@6.3.2_next@15.0.3_@opentelemetry+api@1.9.0_react-dom@18.3.1_react@18.3.1__react_erh4rexutio6xfxki4qahuk4f4","vendor-chunks/tslib@2.8.1","vendor-chunks/cookie@0.7.0","vendor-chunks/map-obj@4.3.0","vendor-chunks/no-case@3.0.4","vendor-chunks/lower-case@2.0.2","vendor-chunks/snakecase-keys@5.4.4","vendor-chunks/snake-case@3.0.4","vendor-chunks/dot-case@3.0.4","vendor-chunks/clsx@2.1.1","vendor-chunks/drizzle-orm@0.36.1_@libsql+client@0.14.0_@neondatabase+serverless@0.10.4_@opentelemetry+api@1_jneduajdzsu5gejq55b43hmr3e","vendor-chunks/@neondatabase+serverless@0.10.4","vendor-chunks/zod@3.23.8","vendor-chunks/tailwind-merge@2.5.4","vendor-chunks/zod-to-json-schema@3.23.5_zod@3.23.8","vendor-chunks/@pinecone-database+pinecone@4.0.0","vendor-chunks/openai-edge@1.2.2","vendor-chunks/@langchain+core@0.3.18_openai@4.72.0_encoding@0.1.13_zod@3.23.8_","vendor-chunks/semver@7.6.3","vendor-chunks/langsmith@0.2.5_openai@4.72.0_encoding@0.1.13_zod@3.23.8_","vendor-chunks/uuid@10.0.0","vendor-chunks/langchain@0.3.5_@langchain+core@0.3.18_openai@4.72.0_encoding@0.1.13_zod@3.23.8___axios@1.7.7_nofamy3krewu5muyc52rz4t3fe","vendor-chunks/retry@0.13.1","vendor-chunks/p-queue@6.6.2","vendor-chunks/@langchain+community@0.3.14_@aws-crypto+sha256-js@5.2.0_@aws-sdk+client-s3@3.693.0_@aws-sdk+c_lyshjp7yilybtpziqse4baivla","vendor-chunks/p-timeout@3.2.0","vendor-chunks/p-retry@4.6.2","vendor-chunks/p-finally@1.0.0","vendor-chunks/md5@2.3.0","vendor-chunks/is-buffer@1.1.6","vendor-chunks/eventemitter3@4.0.7","vendor-chunks/decamelize@1.2.0","vendor-chunks/crypt@0.0.2","vendor-chunks/charenc@0.0.2","vendor-chunks/camelcase@6.3.0","vendor-chunks/ansi-styles@5.2.0","vendor-chunks/@pinecone-database+doc-splitter@0.0.1"], () => (__webpack_exec__("(rsc)/./node_modules/.pnpm/next@15.0.3_@opentelemetry+api@1.9.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fcreate-chat%2Froute&page=%2Fapi%2Fcreate-chat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcreate-chat%2Froute.ts&appDir=%2FUsers%2Fcarlos%2FDesktop%2FTFG%2FTFG%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fcarlos%2FDesktop%2FTFG%2FTFG&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();